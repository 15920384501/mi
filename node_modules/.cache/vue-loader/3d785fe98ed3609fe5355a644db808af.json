{"remainingRequest":"D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\src\\views\\cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\src\\views\\cart.vue","mtime":1584349763112},{"path":"D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\H5\\WebStorm\\vue_cli\\HZW\\mi\\vuecode\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGE6ZnVuY3Rpb24oKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsaXN0czpbXSwKICAgICAgICAgICAgdG90YWxzOjAsIC8v5oC75Lu35qC8CiAgICAgICAgICAgIGNoZWNrZWQ6dHJ1ZSwvL+m7mOiupOWFqOmAiQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBkZWwoaW5kZXgpewogICAgICAgICAgICB0aGlzLmxpc3RzLnNwbGljZShpbmRleCwxKTsKICAgICAgICB9LAogICAgICAgIC8vIOaOp+WItuWFqOmAieS4juWPjemAiQogICAgICAgIGNoZWNrQWxsKCl7CiAgICAgICAgICAgIHRoaXMubGlzdHMuZm9yRWFjaCgoZGF0YSk9PnsKICAgICAgICAgICAgICAgIGRhdGEuaXNTZWxlY3QgPSAhdGhpcy5jaGVja2VkOwogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkOwogICAgICAgIH0sCiAgICAgICAgY2hlY2tib3hjbGljaygpewogICAgICAgICAgICAvL+esrOS4gOasoemhtemdouWKoOi9vei/h+eoi+S4re+8jOWIpOaWreaVsOaNruS4rWlzU2VsZXTnirbmgIHvvIzlpoLmnpzlhajpg6jkuLp0cnVl77yM6YKj5LmI6L+U5ZuedHJ1ZQogICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAgdGhpcy5saXN0cy5ldmVyeSgoaXRlbSk9PnsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlzU2VsZWN0OyAvL+WPquaciemAiemhueS4reWFqOmDqOS4unRydWXvvIzov5Tlm550cnVl44CC5Y+q6KaB5pyJ5LiA5LiqZmFsc2XvvIzov5Tlm55mYWxzZQogICAgICAgICAgICB9KSAKICAgICAgICB9LAogICAgICAgIC8vIOWNleWHu+WVhuWTgeWIl+ihqOmAiemhueaTjeS9nAogICAgICAgIGlucHV0c2VsZWN0KGluZGV4KXsKICAgICAgICAgICAgLy8g5L+u5pS55ZWG5ZOB5YiX6KGo5pWw5o2uCiAgICAgICAgICAgIHRoaXMubGlzdHNbaW5kZXhdLmlzU2VsZWN0ID0gIXRoaXMubGlzdHNbaW5kZXhdLmlzU2VsZWN0OwogICAgICAgICAgICB0aGlzLmNoZWNrYm94Y2xpY2soKTsKICAgICAgICAgICAgdGhpcy5zdW0oKTsKICAgICAgICB9LAogICAgICAgIC8vIOaAu+S7t+agvOiuoeeulwogICAgICAgIHN1bSgpewogICAgICAgICAgICAvLyDmgLvku7fmoLzorqHnrpcKICAgICAgICAgICAgLy8gcmVkdWNlKCnov5Tlm57orqHnrpfmgLvku7fmoLwKICAgICAgICAgICAgLy8gdG90YWwg5oC75Lu35qC857Sv5YqgCiAgICAgICAgICAgIC8vIGl0ZW0g5pWw5o2u5Lit5a+56LGhCiAgICAgICAgICAgIHRoaXMudG90YWxzID0gIHRoaXMubGlzdHMucmVkdWNlKCh0b3RhbCxpdGVtKT0+ewogICAgICAgICAgICAgICAgLy8g5Yik5pat6YCJ6aG5CiAgICAgICAgICAgICAgICBpZighaXRlbS5pc1NlbGVjdCkgcmV0dXJuIHRvdGFsOyAvL2ZhbHNl5LiN6K6p6K6h566X5oC75Lu35qC8CiAgICAgICAgICAgICAgICByZXR1cm4gdG90YWwgKyBwYXJzZUludChpdGVtLnByaWNlKSAqIHBhcnNlSW50KGl0ZW0ubnVtKTsvL+aAu+S7t+agvAogICAgICAgICAgICB9LDApOy8v5oC75Lu35qC86buY6K6k5Y+C5pWw5YC85Li6MAogICAgICAgIH0sCiAgICAgICAgb25zdWJtaXQoKXsKICAgICAgICAgICAgLy8g5Yik5pat55So5oi35ZCN5piv5ZCm5Li656m6CiAgICAgICAgICAgIC8vIOS4uuepuu+8mui3s+i9rOeZu+mZhumhtemdogogICAgICAgICAgICAvLyDkuI3kuLrnqbo66K6i5Y2V6aG16Z2iCiAgICAgICAgICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJuYW1lKXsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvb3JkZXInKQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiIvbG9naW4iLAogICAgICAgICAgICAgICAgICAgIHF1ZXJ5OnsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDoiL29yZGVyIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMubGlzdHMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0Lmxpc3RzOwogICAgICAgIHRoaXMuc3VtKCk7Ly/miafooYzorqHnrpfmgLvku7fmoLwKICAgICAgICB0aGlzLmNoZWNrYm94Y2xpY2soKTsKICAgIH0sCiAgICBiZWZvcmVVcGRhdGUoKSB7CiAgICAgICAgdGhpcy5zdW0oKTsvL+aJp+ihjOiuoeeul+aAu+S7t+agvAogICAgfSwKfQo="},{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <van-nav-bar\r\n        :title=\"$route.name\"\r\n        />\r\n\r\n        <h1 v-show=\"lists.length == 0\">\r\n            购物车为空 <router-link to=\"/home/recommend\" tag=\"button\">去逛逛</router-link>\r\n        </h1>\r\n\r\n        <div v-for=\"(item,index) in lists\" :key=\"index\">\r\n            \r\n            <van-card\r\n                :price=\"item.price\"\r\n                desc=\"描述信息\"\r\n                :title=\"item.name\"\r\n                thumb=\"https://img.yzcdn.cn/vant/ipad.jpeg\"\r\n                >\r\n                \r\n                <div slot=\"tags\">\r\n                    \r\n                    <van-tag plain @click=\"item.num <=1?1:item.num--\" >-</van-tag>\r\n                    <input type=\"text\" v-model=\"item.num\" class=\"num\" >\r\n                    <van-tag plain @click=\"item.num++\" >+</van-tag>\r\n                </div>\r\n                <div slot=\"footer\">\r\n                    <div class=\"checkboxselect\" @click=\"inputselect(index)\">\r\n                        <van-icon name=\"success\" v-show=\"item.isSelect\" />\r\n                    </div>  \r\n                    <!-- <input type=\"checkbox\" class=\"checkboxbutton\" :checked=\"item.isSelect\" @click=\"inputselect(index)\"> -->\r\n                    <van-button size=\"mini\" class=\"delbutton\" @click=\"del(index)\">删除</van-button>\r\n                </div>\r\n            </van-card>\r\n        </div>\r\n\r\n        <div v-show=\"lists.length == 0\">\r\n            <van-divider dashed>猜你喜欢</van-divider>\r\n                \r\n            <router-link to=\"/details\" tag=\"a\">\r\n                <van-card\r\n                    num=\"2\"\r\n                    price=\"2.00\"\r\n                    desc=\"描述信息\"\r\n                    title=\"商品标题\"\r\n                    thumb=\"https://img.yzcdn.cn/vant/ipad.jpeg\"\r\n                />\r\n            </router-link>\r\n            <router-link to=\"/details\" tag=\"a\">\r\n                <van-card\r\n                    num=\"2\"\r\n                    price=\"2.00\"\r\n                    desc=\"描述信息\"\r\n                    title=\"商品标题\"\r\n                    thumb=\"https://img.yzcdn.cn/vant/ipad.jpeg\"\r\n                />\r\n            </router-link>\r\n        </div>\r\n    \r\n\r\n        <van-submit-bar\r\n            :price=\"totals * 100\"\r\n            button-text=\"提交订单\"\r\n            @submit=\"onsubmit\"\r\n            v-show=\"lists.length != 0\"\r\n            >\r\n            <van-checkbox @click=\"checkAll\" :value=\"checked\"  >全选</van-checkbox>\r\n        </van-submit-bar>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data:function(){\r\n            return {\r\n                lists:[],\r\n                totals:0, //总价格\r\n                checked:true,//默认全选\r\n            }\r\n        },\r\n        methods:{\r\n            del(index){\r\n                this.lists.splice(index,1);\r\n            },\r\n            // 控制全选与反选\r\n            checkAll(){\r\n                this.lists.forEach((data)=>{\r\n                    data.isSelect = !this.checked;\r\n                })\r\n                this.checked = !this.checked;\r\n            },\r\n            checkboxclick(){\r\n                //第一次页面加载过程中，判断数据中isSelet状态，如果全部为true，那么返回true\r\n                this.checked =  this.lists.every((item)=>{\r\n                    return item.isSelect; //只有选项中全部为true，返回true。只要有一个false，返回false\r\n                }) \r\n            },\r\n            // 单击商品列表选项操作\r\n            inputselect(index){\r\n                // 修改商品列表数据\r\n                this.lists[index].isSelect = !this.lists[index].isSelect;\r\n                this.checkboxclick();\r\n                this.sum();\r\n            },\r\n            // 总价格计算\r\n            sum(){\r\n                // 总价格计算\r\n                // reduce()返回计算总价格\r\n                // total 总价格累加\r\n                // item 数据中对象\r\n                this.totals =  this.lists.reduce((total,item)=>{\r\n                    // 判断选项\r\n                    if(!item.isSelect) return total; //false不让计算总价格\r\n                    return total + parseInt(item.price) * parseInt(item.num);//总价格\r\n                },0);//总价格默认参数值为0\r\n            },\r\n            onsubmit(){\r\n                // 判断用户名是否为空\r\n                // 为空：跳转登陆页面\r\n                // 不为空:订单页面\r\n                if(this.$store.state.username){\r\n                    this.$router.push('/order')\r\n                }else{\r\n                    this.$router.push({\r\n                        path:\"/login\",\r\n                        query:{\r\n                            path:\"/order\"\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        created(){\r\n            this.lists = this.$store.state.cart.lists;\r\n            this.sum();//执行计算总价格\r\n            this.checkboxclick();\r\n        },\r\n        beforeUpdate() {\r\n            this.sum();//执行计算总价格\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .van-submit-bar{\r\n        bottom:50px;\r\n    }\r\n    .checkboxbutton{\r\n        position: absolute;\r\n        top:50%;\r\n        left:5px;\r\n        margin-top:-20px;\r\n    }\r\n    .delbutton{\r\n        position: absolute;\r\n        right:20px;\r\n        bottom: 5px;\r\n    }\r\n    .num{\r\n        width: 30px;\r\n        text-align: center;\r\n        font-size: 16px;\r\n    }\r\n    .checkboxselect{\r\n        position: absolute;\r\n        top:50%;\r\n        left:5px;\r\n        margin-top:-10px;\r\n        width: 20px;\r\n        height: 20px;\r\n        border-radius: 50%;\r\n        border: 1px solid #C8C9CC;\r\n        i{\r\n            display: block;\r\n            width: 20px;\r\n            height: 20px;\r\n            background: #1989FA;\r\n            border-radius: 50%;\r\n            text-align: center;\r\n            line-height: 22px;\r\n            font-size: 16px;\r\n            color:#fff;\r\n        }\r\n    }\r\n</style>"]}]}